# swiftè¯­æ³•å…¥é—¨



## å¸¸é‡å’Œå˜é‡

### å£°æ˜å¸¸é‡å’Œå˜é‡

- `let`ç”¨æ¥å£°æ˜å¸¸é‡ï¼Œ`var`ç”¨æ¥å£°æ˜å˜é‡
- ä¸€è¡Œå¯ä»¥å£°æ˜å¤šä¸ªå¸¸é‡æˆ–è€…å˜é‡ï¼Œä½¿ç”¨`,`éš”å¼€

```swift
let a= 10
var x = 0.0, y = 0.0, z = 0.0
```

### ç±»å‹æ³¨è§£

å£°æ˜å¸¸é‡/å˜é‡æ—¶å¯ä»¥åŠ ä¸Šç±»å‹æ³¨è§£ï¼ˆtype annotationï¼‰ï¼Œè¯´æ˜å¸¸é‡/å˜é‡ä¸­è¦å­˜å‚¨çš„ç±»å‹ã€‚è¯­æ³•ï¼šåœ¨å¸¸é‡/å˜é‡ååé¢åŠ ä¸Šä¸€ä¸ªå†’å·å’Œç©ºæ ¼ï¼Œç„¶ååŠ ä¸Šç±»å‹åç§°ã€‚

```swift
var welcomeMessage: String
```

å¯ä»¥åœ¨ä¸€è¡Œä¸­å®šä¹‰å¤šä¸ªåŒæ ·ç±»å‹çš„å˜é‡ï¼Œä½¿ç”¨é€—å·åˆ†éš”ï¼Œå¹¶åœ¨æœ€åä¸€ä¸ªå˜é‡ååæ·»åŠ ç±»å‹æ³¨è§£ï¼š

```swift
var red, green, blue: Double
```

### å‘½å

å¸¸é‡ä¸å˜é‡åä¸èƒ½åŒ…å«æ•°å­¦ç¬¦å·ï¼Œç®­å¤´ï¼Œä¿ç•™çš„ï¼ˆæˆ–è€…éæ³•çš„ï¼‰Unicode ç ä½ï¼Œè¿çº¿ä¸åˆ¶è¡¨ç¬¦ã€‚ä¹Ÿä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œä½†æ˜¯å¯ä»¥åœ¨å¸¸é‡ä¸å˜é‡åçš„å…¶ä»–åœ°æ–¹åŒ…å«æ•°å­—ã€‚

> å¦‚æœä½ éœ€è¦ä½¿ç”¨ä¸ Swift ä¿ç•™å…³é”®å­—ç›¸åŒçš„åç§°ä½œä¸ºå¸¸é‡æˆ–è€…å˜é‡åï¼Œä½ å¯ä»¥ä½¿ç”¨åå¼•å·ï¼ˆ`ï¼‰å°†å…³é”®å­—åŒ…å›´çš„æ–¹å¼å°†å…¶ä½œä¸ºåå­—ä½¿ç”¨ã€‚æ— è®ºå¦‚ä½•ï¼Œä½ åº”å½“é¿å…ä½¿ç”¨å…³é”®å­—ä½œä¸ºå¸¸é‡æˆ–å˜é‡åï¼Œé™¤éä½ åˆ«æ— é€‰æ‹©ã€‚

```swift
let Ï€ = 3.14159
let ä½ å¥½ = "ä½ å¥½ä¸–ç•Œ"
let ğŸ¶ğŸ® = "dogcow"
```

**å¯ä»¥æ›´æ”¹ç°æœ‰çš„å˜é‡å€¼ä¸ºå…¶ä»–åŒç±»å‹çš„å€¼,å¸¸é‡çš„å€¼ä¸€æ—¦è¢«ç¡®å®šå°±ä¸èƒ½æ›´æ”¹äº†**ã€‚å°è¯•è¿™æ ·åšä¼šå¯¼è‡´ç¼–è¯‘æ—¶æŠ¥é”™

### è¾“å‡º

`print(_:separator:terminator:)`å‡½æ•°æ¥è¾“å‡ºå½“å‰å¸¸é‡æˆ–å˜é‡çš„å€¼

Swift ç”¨*å­—ç¬¦ä¸²æ’å€¼ï¼ˆstring interpolationï¼‰*çš„æ–¹å¼æŠŠå¸¸é‡åæˆ–è€…å˜é‡åå½“åšå ä½ç¬¦åŠ å…¥åˆ°é•¿å­—ç¬¦ä¸²ä¸­ï¼ŒSwift ä¼šç”¨å½“å‰å¸¸é‡æˆ–å˜é‡çš„å€¼æ›¿æ¢è¿™äº›å ä½ç¬¦ã€‚å°†å¸¸é‡æˆ–å˜é‡åæ”¾å…¥åœ†æ‹¬å·ä¸­ï¼Œå¹¶åœ¨å¼€æ‹¬å·å‰ä½¿ç”¨åæ–œæ å°†å…¶è½¬ä¹‰ï¼š

```swift
print("The current value of friendlyWelcome is \(friendlyWelcome)")
// è¾“å‡ºâ€œThe current value of friendlyWelcome is Bonjour!â€
```



## æ³¨é‡Š

```swift
// è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š

/* è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ³¨é‡Šï¼Œ
ä½†æ˜¯æ˜¯å¤šè¡Œçš„ */

/* è¿™æ˜¯ç¬¬ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šçš„å¼€å¤´
/* è¿™æ˜¯ç¬¬äºŒä¸ªè¢«åµŒå¥—çš„å¤šè¡Œæ³¨é‡Š */
è¿™æ˜¯ç¬¬ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šçš„ç»“å°¾ */
```

## åˆ†å·

Swift å¹¶ä¸å¼ºåˆ¶è¦æ±‚ä½ åœ¨æ¯æ¡è¯­å¥çš„ç»“å°¾å¤„ä½¿ç”¨åˆ†å·ï¼ˆ`;`ï¼‰ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ç…§ä½ è‡ªå·±çš„ä¹ æƒ¯æ·»åŠ åˆ†å·ã€‚æœ‰ä¸€ç§æƒ…å†µä¸‹å¿…é¡»è¦ç”¨åˆ†å·ï¼Œå³ä½ æ‰“ç®—åœ¨åŒä¸€è¡Œå†…å†™å¤šæ¡ç‹¬ç«‹çš„è¯­å¥ï¼š

```swift
let cat = "ğŸ±"; print(cat)
// è¾“å‡ºâ€œğŸ±â€
```

## æ•°å€¼

### æ•´æ•°

Swift æä¾›äº†8ã€16ã€32å’Œ64ä½çš„æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚è¿™äº›æ•´æ•°ç±»å‹å’Œ C è¯­è¨€çš„å‘½åæ–¹å¼å¾ˆåƒï¼Œæ¯”å¦‚8ä½æ— ç¬¦å·æ•´æ•°ç±»å‹æ˜¯ `UInt8`ï¼Œ32ä½æœ‰ç¬¦å·æ•´æ•°ç±»å‹æ˜¯ `Int32` ã€‚å°±åƒ Swift çš„å…¶ä»–ç±»å‹ä¸€æ ·ï¼Œæ•´æ•°ç±»å‹é‡‡ç”¨å¤§å†™å‘½åæ³•ã€‚

### èŒƒå›´

```swift
let minValue = UInt8.min  // minValue ä¸º 0ï¼Œæ˜¯ UInt8 ç±»å‹
let maxValue = UInt8.max  // maxValue ä¸º 255ï¼Œæ˜¯ UInt8 ç±»å‹
```

### Int

ä¸€èˆ¬æ¥è¯´ï¼Œä½ ä¸éœ€è¦ä¸“é—¨æŒ‡å®šæ•´æ•°çš„é•¿åº¦ã€‚Swift æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ•´æ•°ç±»å‹ `Int`ï¼Œé•¿åº¦ä¸å½“å‰å¹³å°çš„åŸç”Ÿå­—é•¿ç›¸åŒï¼š

- åœ¨32ä½å¹³å°ä¸Šï¼Œ`Int` å’Œ `Int32` é•¿åº¦ç›¸åŒã€‚
- åœ¨64ä½å¹³å°ä¸Šï¼Œ`Int` å’Œ `Int64` é•¿åº¦ç›¸åŒã€‚

### UInt

é•¿åº¦ä¸å½“å‰å¹³å°çš„åŸç”Ÿå­—é•¿ç›¸åŒï¼š

- åœ¨32ä½å¹³å°ä¸Šï¼Œ`UInt` å’Œ `UInt32` é•¿åº¦ç›¸åŒã€‚
- åœ¨64ä½å¹³å°ä¸Šï¼Œ`UInt` å’Œ `UInt64` é•¿åº¦ç›¸åŒã€‚

### æµ®ç‚¹æ•°

`Double` è¡¨ç¤º64ä½æµ®ç‚¹æ•°ã€‚å½“ä½ éœ€è¦å­˜å‚¨å¾ˆå¤§æˆ–è€…å¾ˆé«˜ç²¾åº¦çš„æµ®ç‚¹æ•°æ—¶è¯·ä½¿ç”¨æ­¤ç±»å‹ã€‚

`Float` è¡¨ç¤º32ä½æµ®ç‚¹æ•°ã€‚ç²¾åº¦è¦æ±‚ä¸é«˜çš„è¯å¯ä»¥ä½¿ç”¨æ­¤ç±»å‹ã€‚

> `Double` ç²¾ç¡®åº¦å¾ˆé«˜ï¼Œè‡³å°‘æœ‰ 15 ä½å°æ•°ï¼Œè€Œ `Float` åªæœ‰ 6 ä½å°æ•°ã€‚é€‰æ‹©å“ªä¸ªç±»å‹å–å†³äºä½ çš„ä»£ç éœ€è¦å¤„ç†çš„å€¼çš„èŒƒå›´ï¼Œåœ¨ä¸¤ç§ç±»å‹éƒ½åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œå°†ä¼˜å…ˆé€‰æ‹© `Double`ã€‚

## ç±»å‹æ¨æ–­

å½“æ¨æ–­æµ®ç‚¹æ•°çš„ç±»å‹æ—¶ï¼ŒSwift æ€»æ˜¯ä¼šé€‰æ‹© `Double` è€Œä¸æ˜¯ `Float`ã€‚

å¦‚æœè¡¨è¾¾å¼ä¸­åŒæ—¶å‡ºç°äº†æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œä¼šè¢«æ¨æ–­ä¸º `Double` ç±»å‹

## ç±»å‹åˆ«å

*ç±»å‹åˆ«åï¼ˆtype aliasesï¼‰*å°±æ˜¯ç»™ç°æœ‰ç±»å‹å®šä¹‰å¦ä¸€ä¸ªåå­—ã€‚ä½ å¯ä»¥ä½¿ç”¨ `typealias` å…³é”®å­—æ¥å®šä¹‰ç±»å‹åˆ«åã€‚

```swift
typealias AudioSample = UInt16
var maxAmplitudeFound = AudioSample.min
// maxAmplitudeFound ç°åœ¨æ˜¯ 0
```

## å¸ƒå°”å€¼

Swift æœ‰ä¸€ä¸ªåŸºæœ¬çš„*å¸ƒå°”ï¼ˆBooleanï¼‰ç±»å‹*ï¼Œå«åš `Bool`ã€‚å¸ƒå°”å€¼æŒ‡*é€»è¾‘*ä¸Šçš„å€¼ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½æ˜¯çœŸæˆ–è€…å‡ã€‚Swift æœ‰ä¸¤ä¸ªå¸ƒå°”å¸¸é‡ï¼Œ`true` å’Œ `false`

## å…ƒç»„

*å…ƒç»„ï¼ˆtuplesï¼‰*æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ã€‚å…ƒç»„å†…çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¹¶ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹ã€‚

ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`(404, "Not Found")` æ˜¯ä¸€ä¸ªæè¿° *HTTP çŠ¶æ€ç ï¼ˆHTTP status codeï¼‰*çš„å…ƒç»„ã€‚HTTP çŠ¶æ€ç æ˜¯å½“ä½ è¯·æ±‚ç½‘é¡µçš„æ—¶å€™ web æœåŠ¡å™¨è¿”å›çš„ä¸€ä¸ªç‰¹æ®Šå€¼ã€‚å¦‚æœä½ è¯·æ±‚çš„ç½‘é¡µä¸å­˜åœ¨å°±ä¼šè¿”å›ä¸€ä¸ª `404 Not Found` çŠ¶æ€ç 

```swift
let http404Error = (404, "Not Found")
// http404Error çš„ç±»å‹æ˜¯ (Int, String)ï¼Œå€¼æ˜¯ (404, "Not Found")
```

`(404, "Not Found")` å…ƒç»„æŠŠä¸€ä¸ª `Int` å€¼å’Œä¸€ä¸ª `String` å€¼ç»„åˆèµ·æ¥è¡¨ç¤º HTTP çŠ¶æ€ç çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªäººç±»å¯è¯»çš„æè¿°ã€‚è¿™ä¸ªå…ƒç»„å¯ä»¥è¢«æè¿°ä¸ºâ€œä¸€ä¸ªç±»å‹ä¸º `(Int, String)` çš„å…ƒç»„â€ã€‚

ä½ å¯ä»¥æŠŠä»»æ„é¡ºåºçš„ç±»å‹ç»„åˆæˆä¸€ä¸ªå…ƒç»„ï¼Œè¿™ä¸ªå…ƒç»„å¯ä»¥åŒ…å«æ‰€æœ‰ç±»å‹ã€‚åªè¦ä½ æƒ³ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º `(Int, Int, Int)` æˆ–è€… `(String, Bool)` æˆ–è€…å…¶ä»–ä»»ä½•ä½ æƒ³è¦çš„ç»„åˆçš„å…ƒç»„ã€‚

ä½ å¯ä»¥å°†ä¸€ä¸ªå…ƒç»„çš„å†…å®¹åˆ†è§£ï¼ˆdecomposeï¼‰æˆå•ç‹¬çš„å¸¸é‡å’Œå˜é‡ï¼Œç„¶åä½ å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨å®ƒä»¬äº†ï¼š

```swift
let (statusCode, statusMessage) = http404Error
print("The status code is \(statusCode)")
// è¾“å‡ºâ€œThe status code is 404â€
print("The status message is \(statusMessage)")
// è¾“å‡ºâ€œThe status message is Not Foundâ€
```



å¦‚æœä½ åªéœ€è¦ä¸€éƒ¨åˆ†å…ƒç»„å€¼ï¼Œåˆ†è§£çš„æ—¶å€™å¯ä»¥æŠŠè¦å¿½ç•¥çš„éƒ¨åˆ†ç”¨ä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰æ ‡è®°ï¼š

```swift
let (justTheStatusCode, _) = http404Error
print("The status code is \(justTheStatusCode)")
// è¾“å‡ºâ€œThe status code is 404â€
```

æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®å…ƒç»„ä¸­çš„å•ä¸ªå…ƒç´ ï¼Œä¸‹æ ‡ä»é›¶å¼€å§‹ï¼š

```swift
print("The status code is \(http404Error.0)")
// è¾“å‡ºâ€œThe status code is 404â€
print("The status message is \(http404Error.1)")
// è¾“å‡ºâ€œThe status message is Not Foundâ€
```

å¯ä»¥åœ¨å®šä¹‰å…ƒç»„çš„æ—¶å€™ç»™å•ä¸ªå…ƒç´ å‘½åï¼š

```swift
let http200Status = (statusCode: 200, description: "OK")

//ç»™å…ƒç»„ä¸­çš„å…ƒç´ å‘½ååï¼Œä½ å¯ä»¥é€šè¿‡åå­—æ¥è·å–è¿™äº›å…ƒç´ çš„å€¼ï¼š
print("The status code is \(http200Status.statusCode)")
// è¾“å‡ºâ€œThe status code is 200â€
print("The status message is \(http200Status.description)")
// è¾“å‡ºâ€œThe status message is OKâ€
```

ä½œä¸ºå‡½æ•°è¿”å›å€¼æ—¶ï¼Œå…ƒç»„éå¸¸æœ‰ç”¨ã€‚ä¸€ä¸ªç”¨æ¥è·å–ç½‘é¡µçš„å‡½æ•°å¯èƒ½ä¼šè¿”å›ä¸€ä¸ª `(Int, String)` å…ƒç»„æ¥æè¿°æ˜¯å¦è·å–æˆåŠŸã€‚å’Œåªèƒ½è¿”å›ä¸€ä¸ªç±»å‹çš„å€¼æ¯”è¾ƒèµ·æ¥ï¼Œä¸€ä¸ªåŒ…å«ä¸¤ä¸ªä¸åŒç±»å‹å€¼çš„å…ƒç»„å¯ä»¥è®©å‡½æ•°çš„è¿”å›ä¿¡æ¯æ›´æœ‰ç”¨ã€‚

> å½“é‡åˆ°ä¸€äº›ç›¸å…³å€¼çš„ç®€å•åˆ†ç»„æ—¶ï¼Œå…ƒç»„æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å…ƒç»„ä¸é€‚åˆç”¨æ¥åˆ›å»ºå¤æ‚çš„æ•°æ®ç»“æ„ã€‚å¦‚æœä½ çš„æ•°æ®ç»“æ„æ¯”è¾ƒå¤æ‚ï¼Œä¸è¦ä½¿ç”¨å…ƒç»„ï¼Œç”¨ç±»æˆ–ç»“æ„ä½“å»å»ºæ¨¡ã€‚

## å¯é€‰ç±»å‹

ä½¿ç”¨*å¯é€‰ç±»å‹ï¼ˆoptionalsï¼‰*æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰ç±»å‹è¡¨ç¤ºä¸¤ç§å¯èƒ½ï¼š æˆ–è€…æœ‰å€¼ï¼Œ ä½ å¯ä»¥è§£æå¯é€‰ç±»å‹è®¿é—®è¿™ä¸ªå€¼ï¼Œ æˆ–è€…æ ¹æœ¬æ²¡æœ‰å€¼ã€‚

```swift
let possibleNumber = "123"
let convertedNumber = Int(possibleNumber)
// convertedNumber è¢«æ¨æµ‹ä¸ºç±»å‹ "Int?"ï¼Œ æˆ–è€…ç±»å‹ "optional Int"
```

å› ä¸ºè¯¥æ„é€ å™¨å¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒè¿”å›ä¸€ä¸ª*å¯é€‰ç±»å‹*ï¼ˆoptionalï¼‰`Int`ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª `Int`ã€‚ä¸€ä¸ªå¯é€‰çš„ `Int` è¢«å†™ä½œ `Int?` è€Œä¸æ˜¯ `Int`ã€‚é—®å·æš—ç¤ºåŒ…å«çš„å€¼æ˜¯å¯é€‰ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½åŒ…å« `Int` å€¼ä¹Ÿå¯èƒ½*ä¸åŒ…å«å€¼*ã€‚ï¼ˆä¸èƒ½åŒ…å«å…¶ä»–ä»»ä½•å€¼æ¯”å¦‚ `Bool` å€¼æˆ–è€… `String` å€¼ã€‚åªèƒ½æ˜¯ `Int` æˆ–è€…ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ï¼‰

## nil

å¯ä»¥ç»™å¯é€‰å˜é‡èµ‹å€¼ä¸º `nil` æ¥è¡¨ç¤ºå®ƒæ²¡æœ‰å€¼ï¼š

```swift
var serverResponseCode: Int? = 404
// serverResponseCode åŒ…å«ä¸€ä¸ªå¯é€‰çš„ Int å€¼ 404
serverResponseCode = nil
// serverResponseCode ç°åœ¨ä¸åŒ…å«å€¼
```

> `nil` ä¸èƒ½ç”¨äºéå¯é€‰çš„å¸¸é‡å’Œå˜é‡ã€‚å¦‚æœä½ çš„ä»£ç ä¸­æœ‰å¸¸é‡æˆ–è€…å˜é‡éœ€è¦å¤„ç†å€¼ç¼ºå¤±çš„æƒ…å†µï¼Œè¯·æŠŠå®ƒä»¬å£°æ˜æˆå¯¹åº”çš„å¯é€‰ç±»å‹ã€‚

å¦‚æœå£°æ˜ä¸€ä¸ªå¯é€‰å¸¸é‡æˆ–è€…å˜é‡ä½†æ˜¯æ²¡æœ‰èµ‹å€¼ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨è¢«è®¾ç½®ä¸º `nil`ï¼š

```swift
var surveyAnswer: String?
// surveyAnswer è¢«è‡ªåŠ¨è®¾ç½®ä¸º nil
```

## å¯é€‰ç»‘å®š

ä½¿ç”¨*å¯é€‰ç»‘å®šï¼ˆoptional bindingï¼‰*æ¥åˆ¤æ–­å¯é€‰ç±»å‹æ˜¯å¦åŒ…å«å€¼ï¼Œå¦‚æœåŒ…å«å°±æŠŠå€¼èµ‹ç»™ä¸€ä¸ªä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡ã€‚å¯é€‰ç»‘å®šå¯ä»¥ç”¨åœ¨ `if` å’Œ `while` è¯­å¥ä¸­ï¼Œè¿™æ¡è¯­å¥ä¸ä»…å¯ä»¥ç”¨æ¥åˆ¤æ–­å¯é€‰ç±»å‹ä¸­æ˜¯å¦æœ‰å€¼ï¼ŒåŒæ—¶å¯ä»¥å°†å¯é€‰ç±»å‹ä¸­çš„å€¼èµ‹ç»™ä¸€ä¸ªå¸¸é‡æˆ–è€…å˜é‡ã€‚

```swift
if let constantName = someOptional {
    statements
}else {
  	statements
}
```

```swift
if let actualNumber = Int(possibleNumber) {
    print("\'\(possibleNumber)\' has an integer value of \(actualNumber)")
} else {
    print("\'\(possibleNumber)\' could not be converted to an integer")
}
// è¾“å‡ºâ€œ'123' has an integer value of 123â€
```

è¿™æ®µä»£ç å¯ä»¥è¢«ç†è§£ä¸ºï¼š

â€œå¦‚æœ `Int(possibleNumber)` è¿”å›çš„å¯é€‰ `Int` åŒ…å«ä¸€ä¸ªå€¼ï¼Œåˆ›å»ºä¸€ä¸ªå«åš `actualNumber` çš„æ–°å¸¸é‡å¹¶å°†å¯é€‰åŒ…å«çš„å€¼èµ‹ç»™å®ƒã€‚â€

å¦‚æœè½¬æ¢æˆåŠŸï¼Œ`actualNumber` å¸¸é‡å¯ä»¥åœ¨ `if` è¯­å¥çš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ä¸­ä½¿ç”¨ã€‚å®ƒå·²ç»è¢«å¯é€‰ç±»å‹ *åŒ…å«çš„* å€¼åˆå§‹åŒ–è¿‡ï¼Œæ‰€ä»¥ä¸éœ€è¦å†ä½¿ç”¨ `!` åç¼€æ¥è·å–å®ƒçš„å€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`actualNumber` åªè¢«ç”¨æ¥è¾“å‡ºè½¬æ¢ç»“æœã€‚

## if è¯­å¥ä»¥åŠå¼ºåˆ¶è§£æ

ä½ å¯ä»¥ä½¿ç”¨ `if` è¯­å¥å’Œ `nil` æ¯”è¾ƒæ¥åˆ¤æ–­ä¸€ä¸ªå¯é€‰å€¼æ˜¯å¦åŒ…å«å€¼ã€‚ä½ å¯ä»¥ä½¿ç”¨â€œç›¸ç­‰â€(`==`)æˆ–â€œä¸ç­‰â€(`!=`)æ¥æ‰§è¡Œæ¯”è¾ƒã€‚

å¦‚æœå¯é€‰ç±»å‹æœ‰å€¼ï¼Œå®ƒå°†ä¸ç­‰äº `nil`ï¼š

```swift
if convertedNumber != nil {
    print("convertedNumber contains some integer value.")
}
// è¾“å‡ºâ€œconvertedNumber contains some integer value.â€
```

å½“ä½ ç¡®å®šå¯é€‰ç±»å‹ç¡®å®åŒ…å«å€¼ä¹‹åï¼Œä½ å¯ä»¥åœ¨å¯é€‰çš„åå­—åé¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ï¼ˆ`!`ï¼‰æ¥è·å–å€¼ã€‚è¿™ä¸ªæƒŠå¹å·è¡¨ç¤ºâ€œæˆ‘çŸ¥é“è¿™ä¸ªå¯é€‰æœ‰å€¼ï¼Œè¯·ä½¿ç”¨å®ƒã€‚â€è¿™è¢«ç§°ä¸ºå¯é€‰å€¼çš„*å¼ºåˆ¶è§£æï¼ˆforced unwrappingï¼‰*ï¼š

```swift
if convertedNumber != nil {
    print("convertedNumber has an integer value of \(convertedNumber!).")
}
// è¾“å‡ºâ€œconvertedNumber has an integer value of 123.â€
```

> ä½¿ç”¨ `!` æ¥è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„å¯é€‰å€¼ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ä½¿ç”¨ `!` æ¥å¼ºåˆ¶è§£æå€¼ä¹‹å‰ï¼Œä¸€å®šè¦ç¡®å®šå¯é€‰åŒ…å«ä¸€ä¸ªé `nil` çš„å€¼ã€‚

## éšå¼è§£æå¯é€‰ç±»å‹

å¯é€‰ç±»å‹æš—ç¤ºäº†å¸¸é‡æˆ–è€…å˜é‡å¯ä»¥â€œæ²¡æœ‰å€¼â€ã€‚å¯é€‰å¯ä»¥é€šè¿‡ `if` è¯­å¥æ¥åˆ¤æ–­æ˜¯å¦æœ‰å€¼ï¼Œå¦‚æœæœ‰å€¼çš„è¯å¯ä»¥é€šè¿‡å¯é€‰ç»‘å®šæ¥è§£æå€¼ã€‚

æœ‰æ—¶å€™åœ¨ç¨‹åºæ¶æ„ä¸­ï¼Œç¬¬ä¸€æ¬¡è¢«èµ‹å€¼ä¹‹åï¼Œå¯ä»¥ç¡®å®šä¸€ä¸ªå¯é€‰ç±»å‹*æ€»ä¼š*æœ‰å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡éƒ½è¦åˆ¤æ–­å’Œè§£æå¯é€‰å€¼æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œå› ä¸ºå¯ä»¥ç¡®å®šå®ƒæ€»ä¼šæœ‰å€¼ã€‚

è¿™ç§ç±»å‹çš„å¯é€‰çŠ¶æ€è¢«å®šä¹‰ä¸ºéšå¼è§£æå¯é€‰ç±»å‹ï¼ˆimplicitly unwrapped optionalsï¼‰ã€‚æŠŠæƒ³è¦ç”¨ä½œå¯é€‰çš„ç±»å‹çš„åé¢çš„é—®å·ï¼ˆ`String?`ï¼‰æ”¹æˆæ„Ÿå¹å·ï¼ˆ`String!`ï¼‰æ¥å£°æ˜ä¸€ä¸ªéšå¼è§£æå¯é€‰ç±»å‹ã€‚ä¸å…¶åœ¨ä½¿ç”¨æ—¶æŠŠæ„Ÿå¹å·æ”¾åœ¨å¯é€‰ç±»å‹çš„åç§°çš„åé¢ï¼Œä½ å¯ä»¥åœ¨å®šä¹‰å®ƒæ—¶ï¼Œç›´æ¥æŠŠæ„Ÿå¹å·æ”¾åœ¨å¯é€‰ç±»å‹çš„åé¢ã€‚

å½“å¯é€‰ç±»å‹è¢«ç¬¬ä¸€æ¬¡èµ‹å€¼ä¹‹åå°±å¯ä»¥ç¡®å®šä¹‹åä¸€ç›´æœ‰å€¼çš„æ—¶å€™ï¼Œéšå¼è§£æå¯é€‰ç±»å‹éå¸¸æœ‰ç”¨ã€‚

```swift
let possibleString: String? = "An optional string."
let forcedString: String = possibleString! // éœ€è¦æ„Ÿå¹å·æ¥è·å–å€¼

let assumedString: String! = "An implicitly unwrapped optional string."
let implicitString: String = assumedString  // ä¸éœ€è¦æ„Ÿå¹å·
```

ä½ **å¯ä»¥æŠŠéšå¼è§£æå¯é€‰ç±»å‹å½“åšä¸€ä¸ªå¯ä»¥è‡ªåŠ¨è§£æçš„å¯é€‰ç±»å‹**ã€‚å½“ä½ **ä½¿ç”¨ä¸€ä¸ªéšå¼è§£æå¯é€‰å€¼æ—¶ï¼ŒSwift é¦–å…ˆä¼šæŠŠå®ƒå½“ä½œæ™®é€šçš„å¯é€‰å€¼ï¼›å¦‚æœå®ƒä¸èƒ½è¢«å½“æˆå¯é€‰ç±»å‹ä½¿ç”¨ï¼ŒSwift ä¼šå¼ºåˆ¶è§£æå¯é€‰å€¼ã€‚**åœ¨ä»¥ä¸Šçš„ä»£ç ä¸­ï¼Œå¯é€‰å€¼ `assumedString` åœ¨æŠŠè‡ªå·±çš„å€¼èµ‹ç»™ `implicitString` ä¹‹å‰ä¼šè¢«å¼ºåˆ¶è§£æï¼ŒåŸå› æ˜¯ `implicitString` æœ¬èº«çš„ç±»å‹æ˜¯éå¯é€‰ç±»å‹çš„ `String`ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œ`optionalString` å¹¶æ²¡æœ‰æ˜¾å¼çš„æ•°æ®ç±»å‹ã€‚é‚£ä¹ˆæ ¹æ®ç±»å‹æ¨æ–­ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯é€‰ç±»å‹ã€‚

```swift
let optionalString = assumedString
// optionalString çš„ç±»å‹æ˜¯ "String?"ï¼ŒassumedString ä¹Ÿæ²¡æœ‰è¢«å¼ºåˆ¶è§£æã€‚
```

å¦‚æœä½ åœ¨éšå¼è§£æå¯é€‰ç±»å‹æ²¡æœ‰å€¼çš„æ—¶å€™å°è¯•å–å€¼ï¼Œä¼šè§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚å’Œä½ åœ¨æ²¡æœ‰å€¼çš„æ™®é€šå¯é€‰ç±»å‹åé¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ä¸€æ ·ã€‚

ä½ å¯ä»¥æŠŠéšå¼è§£æå¯é€‰ç±»å‹å½“åšæ™®é€šå¯é€‰ç±»å‹æ¥åˆ¤æ–­å®ƒæ˜¯å¦åŒ…å«å€¼ï¼š

```swift
if assumedString != nil {
    print(assumedString!)
}
// è¾“å‡ºâ€œAn implicitly unwrapped optional string.â€
```

ä½ ä¹Ÿå¯ä»¥åœ¨å¯é€‰ç»‘å®šä¸­ä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹æ¥æ£€æŸ¥å¹¶è§£æå®ƒçš„å€¼ï¼š

```swift
if let definiteString = assumedString {
    print(definiteString)
}
// è¾“å‡ºâ€œAn implicitly unwrapped optional string.â€
```

> å¦‚æœä¸€ä¸ªå˜é‡ä¹‹åå¯èƒ½å˜æˆ `nil` çš„è¯è¯·ä¸è¦ä½¿ç”¨éšå¼è§£æå¯é€‰ç±»å‹ã€‚å¦‚æœä½ éœ€è¦åœ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸­åˆ¤æ–­æ˜¯å¦æ˜¯ `nil` çš„è¯ï¼Œè¯·ä½¿ç”¨æ™®é€šå¯é€‰ç±»å‹ã€‚

## é”™è¯¯å¤„ç†

```swift 
func canThrowAnError() throws {
    // è¿™ä¸ªå‡½æ•°æœ‰å¯èƒ½æŠ›å‡ºé”™è¯¯
}

do {
    try canThrowAnError()
    // æ²¡æœ‰é”™è¯¯æ¶ˆæ¯æŠ›å‡º
} catch {
    // æœ‰ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯æŠ›å‡º
}


```

ä¸€ä¸ª `do` è¯­å¥åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åŒ…å«ä½œç”¨åŸŸï¼Œä½¿å¾—é”™è¯¯èƒ½è¢«ä¼ æ’­åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª `catch` ä»å¥ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªé”™è¯¯å¤„ç†å¦‚ä½•ç”¨æ¥åº”å¯¹ä¸åŒé”™è¯¯æ¡ä»¶çš„ä¾‹å­ã€‚

```swift
func makeASandwich() throws {
    // ...
}

do {
    try makeASandwich()
    eatASandwich()
} catch SandwichError.outOfCleanDishes {
    washDishes()
} catch SandwichError.missingIngredients(let ingredients) {
    buyGroceries(ingredients)
}
```

åœ¨æ­¤ä¾‹ä¸­ï¼Œ`makeASandwich()`ï¼ˆåšä¸€ä¸ªä¸‰æ˜æ²»ï¼‰å‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯æ¶ˆæ¯å¦‚æœæ²¡æœ‰å¹²å‡€çš„ç›˜å­æˆ–è€…æŸä¸ªåŸæ–™ç¼ºå¤±ã€‚å› ä¸º `makeASandwich()` æŠ›å‡ºé”™è¯¯ï¼Œå‡½æ•°è°ƒç”¨è¢«åŒ…è£¹åœ¨ `try` è¡¨è¾¾å¼ä¸­ã€‚å°†å‡½æ•°åŒ…è£¹åœ¨ä¸€ä¸ª `do` è¯­å¥ä¸­ï¼Œä»»ä½•è¢«æŠ›å‡ºçš„é”™è¯¯ä¼šè¢«ä¼ æ’­åˆ°æä¾›çš„ `catch` ä»å¥ä¸­ã€‚

å¦‚æœæ²¡æœ‰é”™è¯¯è¢«æŠ›å‡ºï¼Œ`eatASandwich()` å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœä¸€ä¸ªåŒ¹é… `SandwichError.outOfCleanDishes` çš„é”™è¯¯è¢«æŠ›å‡ºï¼Œ`washDishes()` å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœä¸€ä¸ªåŒ¹é… `SandwichError.missingIngredients` çš„é”™è¯¯è¢«æŠ›å‡ºï¼Œ`buyGroceries(_:)` å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”ä½¿ç”¨ `catch` æ‰€æ•æ‰åˆ°çš„å…³è”å€¼ `[String]` ä½œä¸ºå‚æ•°ã€‚

## æ–­è¨€å’Œå…ˆå†³æ¡ä»¶

æ–­è¨€å’Œå…ˆå†³æ¡ä»¶æ˜¯åœ¨è¿è¡Œæ—¶æ‰€åšçš„æ£€æŸ¥ã€‚ä½ å¯ä»¥ç”¨ä»–ä»¬æ¥æ£€æŸ¥åœ¨æ‰§è¡Œåç»­ä»£ç ä¹‹å‰æ˜¯å¦ä¸€ä¸ªå¿…è¦çš„æ¡ä»¶å·²ç»è¢«æ»¡è¶³äº†ã€‚å¦‚æœæ–­è¨€æˆ–è€…å…ˆå†³æ¡ä»¶ä¸­çš„å¸ƒå°”æ¡ä»¶è¯„ä¼°çš„ç»“æœä¸º trueï¼ˆçœŸï¼‰ï¼Œåˆ™ä»£ç åƒå¾€å¸¸ä¸€æ ·ç»§ç»­æ‰§è¡Œã€‚å¦‚æœå¸ƒå°”æ¡ä»¶è¯„ä¼°ç»“æœä¸º falseï¼ˆå‡ï¼‰ï¼Œç¨‹åºçš„å½“å‰çŠ¶æ€æ˜¯æ— æ•ˆçš„ï¼Œåˆ™ä»£ç æ‰§è¡Œç»“æŸï¼Œåº”ç”¨ç¨‹åºä¸­æ­¢ã€‚

ä½¿ç”¨æ–­è¨€å’Œå…ˆå†³æ¡ä»¶ä¸æ˜¯ä¸€ä¸ªèƒ½å¤Ÿé¿å…å‡ºç°ç¨‹åºå‡ºç°æ— æ•ˆçŠ¶æ€çš„ç¼–ç æ–¹æ³•ã€‚ç„¶è€Œï¼Œå¦‚æœä¸€ä¸ªæ— æ•ˆçŠ¶æ€ç¨‹åºäº§ç”Ÿäº†ï¼Œæ–­è¨€å’Œå…ˆå†³æ¡ä»¶å¯ä»¥å¼ºåˆ¶æ£€æŸ¥ä½ çš„æ•°æ®å’Œç¨‹åºçŠ¶æ€ï¼Œä½¿å¾—ä½ çš„ç¨‹åºå¯é¢„æµ‹çš„ä¸­æ­¢ï¼ˆè¯‘è€…ï¼šä¸æ˜¯ç³»ç»Ÿå¼ºåˆ¶çš„ï¼Œè¢«åŠ¨çš„ä¸­æ­¢ï¼‰ï¼Œå¹¶å¸®åŠ©ä½¿è¿™ä¸ªé—®é¢˜æ›´å®¹æ˜“è°ƒè¯•ã€‚ä¸€æ—¦æ¢æµ‹åˆ°æ— æ•ˆçš„çŠ¶æ€ï¼Œæ‰§è¡Œåˆ™è¢«ä¸­æ­¢ï¼Œé˜²æ­¢æ— æ•ˆçš„çŠ¶æ€å¯¼è‡´çš„è¿›ä¸€æ­¥å¯¹äºç³»ç»Ÿçš„ä¼¤å®³ã€‚

æ–­è¨€å’Œå…ˆå†³æ¡ä»¶çš„ä¸åŒç‚¹æ˜¯ï¼Œä»–ä»¬ä»€ä¹ˆæ—¶å€™è¿›è¡ŒçŠ¶æ€æ£€æµ‹ï¼šæ–­è¨€ä»…åœ¨è°ƒè¯•ç¯å¢ƒè¿è¡Œï¼Œè€Œå…ˆå†³æ¡ä»¶åˆ™åœ¨è°ƒè¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ–­è¨€çš„æ¡ä»¶å°†ä¸ä¼šè¿›è¡Œè¯„ä¼°ã€‚è¿™ä¸ªæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ–­è¨€åœ¨ä½ çš„å¼€å‘é˜¶æ®µï¼Œä½†æ˜¯è¿™äº›æ–­è¨€åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚

### ä½¿ç”¨æ–­è¨€è°ƒè¯•

å¯ä»¥è°ƒç”¨ Swift æ ‡å‡†åº“çš„ `assert(_:_:file:line:)` å‡½æ•°æ¥å†™ä¸€ä¸ªæ–­è¨€ã€‚å‘è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªç»“æœä¸º `true` æˆ–è€… `false` çš„è¡¨è¾¾å¼ä»¥åŠä¸€æ¡ä¿¡æ¯ï¼Œå½“è¡¨è¾¾å¼çš„ç»“æœä¸º `false` çš„æ—¶å€™è¿™æ¡ä¿¡æ¯ä¼šè¢«æ˜¾ç¤ºï¼š

```swift
let age = -3
assert(age >= 0, "A person's age cannot be less than zero")
// å› ä¸º age < 0ï¼Œæ‰€ä»¥æ–­è¨€ä¼šè§¦å‘
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰ `age >= 0` ä¸º `true` æ—¶ï¼Œå³ `age` çš„å€¼éè´Ÿçš„æ—¶å€™ï¼Œä»£ç æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚å¦‚æœ `age` çš„å€¼æ˜¯è´Ÿæ•°ï¼Œå°±åƒä»£ç ä¸­é‚£æ ·ï¼Œ`age >= 0` ä¸º `false`ï¼Œæ–­è¨€è¢«è§¦å‘ï¼Œç»ˆæ­¢åº”ç”¨ã€‚

å¦‚æœä¸éœ€è¦æ–­è¨€ä¿¡æ¯ï¼Œå¯ä»¥å°±åƒè¿™æ ·å¿½ç•¥æ‰ï¼š

```swift
assert(age >= 0)
```

å¦‚æœä»£ç å·²ç»æ£€æŸ¥äº†æ¡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ `assertionFailure(_:file:line:)` å‡½æ•°æ¥è¡¨æ˜æ–­è¨€å¤±è´¥äº†ï¼Œä¾‹å¦‚ï¼š

```swift
if age > 10 {
    print("You can ride the roller-coaster or the ferris wheel.")
} else if age > 0 {
    print("You can ride the ferris wheel.")
} else {
    assertionFailure("A person's age can't be less than zero.")
}
```

### å¼ºåˆ¶æ‰§è¡Œå…ˆå†³æ¡ä»¶

å½“ä¸€ä¸ªæ¡ä»¶å¯èƒ½ä¸ºå‡ï¼Œä½†æ˜¯ç»§ç»­æ‰§è¡Œä»£ç è¦æ±‚æ¡ä»¶å¿…é¡»ä¸ºçœŸçš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å…ˆå†³æ¡ä»¶ã€‚ä¾‹å¦‚ä½¿ç”¨å…ˆå†³æ¡ä»¶æ¥æ£€æŸ¥æ˜¯å¦ä¸‹æ ‡è¶Šç•Œï¼Œæˆ–è€…æ¥æ£€æŸ¥æ˜¯å¦å°†ä¸€ä¸ªæ­£ç¡®çš„å‚æ•°ä¼ ç»™å‡½æ•°ã€‚

ä½ å¯ä»¥ä½¿ç”¨å…¨å±€ `precondition(_:_:file:line:)` å‡½æ•°æ¥å†™ä¸€ä¸ªå…ˆå†³æ¡ä»¶ã€‚å‘è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªç»“æœä¸º `true` æˆ–è€… `false` çš„è¡¨è¾¾å¼ä»¥åŠä¸€æ¡ä¿¡æ¯ï¼Œå½“è¡¨è¾¾å¼çš„ç»“æœä¸º `false` çš„æ—¶å€™è¿™æ¡ä¿¡æ¯ä¼šè¢«æ˜¾ç¤ºï¼š

```swift
// åœ¨ä¸€ä¸ªä¸‹æ ‡çš„å®ç°é‡Œ...
precondition(index > 0, "Index must be greater than zero.")
```

å¯ä»¥è°ƒç”¨ `preconditionFailure(_:file:line:)` æ–¹æ³•æ¥è¡¨æ˜å‡ºç°äº†ä¸€ä¸ªé”™è¯¯ï¼Œä¾‹å¦‚ï¼Œswitch è¿›å…¥äº† default åˆ†æ”¯ï¼Œä½†æ˜¯æ‰€æœ‰çš„æœ‰æ•ˆå€¼åº”è¯¥è¢«ä»»æ„ä¸€ä¸ªå…¶ä»–åˆ†æ”¯ï¼ˆé default åˆ†æ”¯ï¼‰å¤„ç†ã€‚