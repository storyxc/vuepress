---
title: logback自定义filter
date: 2023-05-17 10:15:52
permalink: /pages/e6fd8e/
categories:
  - java
  - Java框架
tags:
  - logback
---

# logback自定义filter

## filter

```java
/**
 * @author xc
 * @description logback日志过滤器：开发环境下只打印本项目路径下的debug & debug以上级别的日志
 * @date 2023/5/16 20:15
 */
public class LogBackDebugPackageFilter extends AbstractMatcherFilter<ILoggingEvent> {
    private static final String PROJECT_BASE_PACKAGE = "com.storyxc";

    @Override
    public FilterReply decide(ILoggingEvent event) {
        if (!isStarted()) {
            return FilterReply.NEUTRAL;
        }
        Level level = event.getLevel();
        if (level.isGreaterOrEqual(Level.DEBUG)) {
            String loggerName = event.getLoggerName();
            if (level.equals(Level.DEBUG)) {
                if (loggerName != null && loggerName.startsWith(PROJECT_BASE_PACKAGE)) {
                    return FilterReply.ACCEPT;
                } else {
                    return FilterReply.DENY;
                }
            }else {
                return FilterReply.ACCEPT;
            }
        } else {
            return FilterReply.NEUTRAL;
        }
    }
}
```

## logback-spring.xml

```xml
<!--输出到控制台-->
<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
    <!-- 此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息 -->
    <!-- <filter class="ch.qos.logback.classic.filter.ThresholdFilter"> -->
    <!--     <level>debug</level> -->
    <!-- </filter> -->
    <filter class="cn.superdesk.opcenter.config.logback.LogBackDebugPackageFilter">
    </filter>
    <encoder>
        <Pattern>${CONSOLE_LOG_PATTERN}</Pattern>
        <!-- 设置字符集 -->
        <charset>UTF-8</charset>
    </encoder>
</appender>
```

